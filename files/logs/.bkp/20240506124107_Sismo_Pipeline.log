
========================================================================
                       Iniciando do Pipeline                         
========================================================================

 Criando arquivos de backup...
 Arquivos de backup criados com sucesso!

 -> Executando events_pipeline.py...

 - Argumento 1: files/catalogo/catalogo-moho.csv
 --> Client:
  http://seisarc.sismo.iag.usp.br
 --> Client Backup:
  http://rsbr.on.br:8081/fdsnws/dataselect/1
-----------------------------------------------------


 --------- Iniciando o ProcessarID.py --------- 
 ------------------------------ Acessando Catálogo ------------------------------ 
  0%|          | 0/10 [00:00<?, ?it/s] 10%|█         | 1/10 [00:00<00:01,  5.41it/s] 50%|█████     | 5/10 [00:00<00:00, 18.22it/s] 90%|█████████ | 9/10 [00:00<00:00, 23.58it/s]100%|██████████| 10/10 [00:00<00:00, 20.50it/s]
 --> Iterando sobre eventos
 - Número de eventos: 10
 - Client: http://seisarc.sismo.iag.usp.br
 - Client Backup: http://rsbr.on.br:8081/fdsnws/dataselect/1
 --> Adrquirindo Inventário de Estações
  0%|          | 0/10 [00:00<?, ?it/s]/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/obspy/core/inventory/network.py:321: UserWarning: Found more than one matching channel metadata. Returning first.
  warnings.warn(msg)
 50%|█████     | 5/10 [00:00<00:00, 41.16it/s]############ Event 1: usp2014gyqn ############

--> Pick 1
 - Net: BL
 - Sta: BB19B
 - Cha: HHE
 - Loc: None
 - Seed ID: BL.BB19B..HHZ 
 - BL.BB19B X,Y : -21.0662, -48.5279
 - Distância até o epicentro: 0.4739622562125565 km
 Downloading ...
 Pick Time -> 2014-04-09T20:49:43.974670Z
 Origin Time -> 2014-04-09T20:49:40.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['BB19B']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['BB19B']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20140409T204940
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2014gyqn
 - Pwave Picks: 1
#####################################################

############ Event 2: usp2021ezmw ############

 - Event: usp2021ezmw
 - Pwave Picks: 0
#####################################################

############ Event 3: usp2020hkyw ############

--> Pick 1
 - Net: BR
 - Sta: PDRB
 - Cha: HHZ
 - Loc: None
 - Seed ID: BR.PDRB..HHZ 
 - BR.PDRB X,Y : -11.612297, -56.729597
 - Distância até o epicentro: 0.22934459104391727 km
 Downloading ...
 Pick Time -> 2020-04-15T14:40:19.978417Z
 Origin Time -> 2020-04-15T14:40:20.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['PDRB']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['PDRB']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20200415T144020
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2020hkyw
 - Pwave Picks: 1
#####################################################

############ Event 4: usp2022gpbs ############

--> Pick 1
 - Net: NB
 - Sta: NBMO
 - Cha: HHZ
 - Loc: None
 - Seed ID: NB.NBMO..HHZ 
 - NB.NBMO X,Y : -3.310348, -40.042927
 - Distância até o epicentro: 0.6296512501624295 km
 Downloading ...
 Pick Time -> 2022-04-04T15:07:54.334523Z
 Origin Time -> 2022-04-04T15:07:42.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['NBMO']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NBMO']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20220404T150742
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2022gpbs
 - Pwave Picks: 1
#####################################################

############ Event 5: usp2014oaxt ############

--> Pick 1
 - Net: BR
 - Sta: NPGB
 - Cha: HHZ
 - Loc: None
 - Seed ID: BR.NPGB..HHZ 
 - BR.NPGB X,Y : -7.0454, -55.3579
 - Distância até o epicentro: 0.7840549447308719 km
 Downloading ...
 Pick Time -> 2014-07-19T17:41:08.185058Z
 Origin Time -> 2014-07-19T17:30:30.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['NPGB']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NPGB']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20140719T173030
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2014oaxt
 - Pwave Picks: 1
#####################################################

############ Event 6: usp2015rxwc ############

--> Pick 1
 - Net: NB
 - Sta: NBAN
 - Cha: HHZ
 - Loc: None
 - Seed ID: NB.NBAN..HHZ 
 - NB.NBAN X,Y : -9.668656, -36.274726
 - Distância até o epicentro: 33.505971131504076 km
 Downloading ...
 Pick Time -> 2016-09-12T23:24:35.547698Z
 Origin Time -> 2015-09-12T23:24:35.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['NBAN']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NBAN']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20150912T232435
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2015rxwc
 - Pwave Picks: 1
#####################################################

############ Event 7: usp2018cdft ############

--> Pick 1
 - Net: BX
 - Sta: LDASE
 - Cha: HHZ
 - Loc: None
 - Seed ID: BX.LDASE..HHZ 
 - BX.LDASE X,Y : -23.3932, -51.1177
 - Distância até o epicentro: 9.158357033931011 km
 Downloading ...
 Pick Time -> 2018-01-31T05:22:35.881485Z
 Origin Time -> 2018-01-31T05:22:34.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['LDASE']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['LDASE']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20180131T052234
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2018cdft
 - Pwave Picks: 1
#####################################################

############ Event 8: usp2019dmvk ############

--> Pick 1
 - Net: BX
 - Sta: LDASE
 - Cha: HHZ
 - Loc: None
 - Seed ID: BX.LDASE..HHZ 
 - BX.LDASE X,Y : -23.3932, -51.1177
 - Distância até o epicentro: 11.366728946851751 km
 Downloading ...
 Pick Time -> 2019-02-19T17:08:54.749695Z
 Origin Time -> 2019-02-19T17:08:54.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['LDASE']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['LDASE']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20190219T170854
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2019dmvk
 - Pwave Picks: 1
#####################################################

############ Event 9: usp2014kloc ############

--> Pick 1
 - Net: ON
 - Sta: CAM01
 - Cha: HHR
 - Loc: None
 - Seed ID: ON.CAM01..HHZ 
 - ON.CAM01 X,Y : -21.825656, -41.657401
 - Distância até o epicentro: 2.4514531673196425 km
 Downloading ...
 Pick Time -> 2014-05-29T14:58:33.841855Z
 Origin Time -> 2014-05-29T14:58:30.000000Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['CAM01']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['CAM01']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20140529T145830
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2014kloc
 - Pwave Picks: 1
#####################################################

############ Event 10: usp2015cjmh ############

--> Pick 1
 - Net: NB
 - Sta: NBRF
 - Cha: HHZ
 - Loc: None
 - Seed ID: NB.NBRF..HHZ 
 - NB.NBRF X,Y : -8.679466, -35.127172
 - Distância até o epicentro: 101.62578000652093 km
 Downloading ...
 Pick Time -> 2015-02-03T15:30:53.728118Z
 Origin Time -> 2015-02-03T15:30:35.694424Z
 Channel -> HHZ
100%|██████████| 10/10 [00:00<00:00, 24.57it/s]100%|██████████| 10/10 [00:00<00:00, 26.14it/s]
 ! Erro ao baixar canal HHZ da estação ['NBRF']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NBRF']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20150203T153035
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
--> Pick 2
 - Net: NB
 - Sta: NBPA
 - Cha: HHZ
 - Loc: None
 - Seed ID: NB.NBPA..HHZ 
 - NB.NBPA X,Y : -5.75028, -37.112047
 - Distância até o epicentro: 313.89829803256146 km
 Downloading ...
 Pick Time -> 2015-02-03T15:31:21.921630Z
 Origin Time -> 2015-02-03T15:30:35.694424Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['NBPA']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NBPA']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20150203T153035
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
--> Pick 3
 - Net: NB
 - Sta: NBLI
 - Cha: HHZ
 - Loc: None
 - Seed ID: NB.NBLI..HHZ 
 - NB.NBLI X,Y : -7.364556, -36.949743
 - Distância até o epicentro: 152.4593972818572 km
 Downloading ...
 Pick Time -> 2015-02-03T15:31:00.986785Z
 Origin Time -> 2015-02-03T15:30:35.694424Z
 Channel -> HHZ
 ! Erro ao baixar canal HHZ da estação ['NBLI']!
   ERROR:  Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 ! Erro ao baixar canal HHZ da estação ['NBLI']: Bad request. If you think your request was valid please contact the developers.
HTTP Status code: 400
Detailed response of server:


 - Nomeando diretório com origin_time: 20150203T153035
Error downloading waveform: 'Iterar_e_Baixar' object has no attribute 'st'
 - Event: usp2015cjmh
 - Pwave Picks: 3
#####################################################

Dados salvos com sucesso em ./files/events/events.csv
Erros salvos com sucesso em ./files/events/erros.csv

 Criando arquivos de backup...
 Arquivos de backup criados com sucesso!

 ---------------- INICIANDO CORE/GERAR_PREDCSV.PY ---------------------------- 
Pred.csv criado com sucesso
Erros.csv criado com sucesso

 -------------- INICIANDO O DATA_ANALYSIS/PREPROCESS.PY -------------------- 
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
posx and posy should be finite values
Traceback (most recent call last):
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pre_process.py", line 82, in <module>
    main()
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pre_process.py", line 78, in main
    hist_hora()
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pre_process.py", line 69, in hist_hora
    plt.savefig('files/figures/pre_process/plots/histogramas/hist_hora.png')
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/pyplot.py", line 1119, in savefig
    res = fig.savefig(*args, **kwargs)  # type: ignore[func-returns-value]
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/figure.py", line 3390, in savefig
    self.canvas.print_figure(fname, **kwargs)
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/backends/backend_qtagg.py", line 75, in print_figure
    super().print_figure(*args, **kwargs)
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/backend_bases.py", line 2187, in print_figure
    result = print_method(
             ^^^^^^^^^^^^^
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/backend_bases.py", line 2043, in <lambda>
    print_method = functools.wraps(meth)(lambda *args, **kwargs: meth(
                                                                 ^^^^^
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/backends/backend_agg.py", line 497, in print_png
    self._print_pil(filename_or_obj, "png", pil_kwargs, metadata)
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/backends/backend_agg.py", line 446, in _print_pil
    mpl.image.imsave(
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/matplotlib/image.py", line 1656, in imsave
    image.save(fname, **pil_kwargs)
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/PIL/Image.py", line 2435, in save
    fp = builtins.open(filename, "w+b")
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
FileNotFoundError: [Errno 2] Arquivo ou diretório inexistente: 'files/figures/pre_process/plots/histogramas/hist_hora.png'

 ----------------- INICIANDO O PREDICT.PY ---------------------------- 
[{"success":true}]

 ---------------- INICIANDO DATA_ANALYSIS/POSPROCESS.PY ---------------------------- 
0it [00:00, ?it/s]0it [00:00, ?it/s]
Traceback (most recent call last):
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pos_process.py", line 844, in <module>
    df_nc, df_c, evs, df_nc_val, df_c_val, picks, dict_filt = main()
                                                              ^^^^^^
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pos_process.py", line 835, in main
    df_nc, df_c, evs, df_nc_val, df_c_val, picks, dict_filt = load_data()
                                                              ^^^^^^^^^^^
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pos_process.py", line 797, in load_data
    picks, dict_filt = snr_p(df_nc, 5)
                       ^^^^^^^^^^^^^^^
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/pos_process.py", line 601, in snr_p
    return picks, dict_filt
                  ^^^^^^^^^
UnboundLocalError: cannot access local variable 'dict_filt' where it is not associated with a value

 -------------- Processo de criação de mapas iniciado ------------------
 -> Executando make_maps.py...
Error returned from GMT API: GMT_MEMORY_ERROR (25)
Traceback (most recent call last):
  File "/home/ipt/projetos/ClassificadorSismologico/source/data_analysis/make_maps.py", line 13, in <module>
    import pygmt
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/pygmt/__init__.py", line 29, in <module>
    with clib.Session() as lib:
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/pygmt/clib/session.py", line 217, in __enter__
    self.create("pygmt-session")
  File "/home/ipt/.pyenv/versions/sismologia/lib/python3.11/site-packages/pygmt/clib/session.py", line 401, in create
    raise GMTCLibError(
pygmt.exceptions.GMTCLibError: Failed to create a GMT API session:


 ----------------- Iniciando o pdflatex .tex ---------------------------- 
/home/ipt/.pyenv/versions/sismologia/bin/python: can't open file '/home/ipt/projetos/ClassificadorSismologico/source/sismologia-ipt-latex/tex/relatorio_preditivo/python/figures.py': [Errno 2] No such file or directory
/home/ipt/.pyenv/versions/sismologia/bin/python: can't open file '/home/ipt/projetos/ClassificadorSismologico/source/sismologia-ipt-latex/tex/relatorio_preditivo/python/mapa.py': [Errno 2] No such file or directory
~/projetos/ClassificadorSismologico/source/sismologia-ipt-latex ~/projetos/ClassificadorSismologico
This is pdfTeX, Version 3.141592653-2.6-1.40.24 (TeX Live 2022/Debian) (preloaded format=pdflatex)
 restricted \write18 enabled.
entering extended mode
! I can't find file `relatorio_preditivo.tex'.
<*> relatorio_preditivo.tex
                           
(Press Enter to retry, or Control-D to exit)
Please type another input file name: ! I can't find file `relatorio_preditivo.tex'.
<*> relatorio_preditivo.tex
                           
(Press Enter to retry, or Control-D to exit)
Please type another input file name: 